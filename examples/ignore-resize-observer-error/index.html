<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Resize observer title test</title>
</head>
<body>
<div>
    <h1>Resize observer test</h1>
    <form>
        <div><label>Observer enabled:</label><input type="checkbox" checked></div>
        <div><label>Adjust width:</label><input type="range" value="600" min="300" max="1300"></div>
    </form>
</div>
<script>
    if (window.ResizeObserver) {
        const h1Elem   = document.querySelector('h1');
        const divElem  = document.querySelector('body > div');
        const slider   = document.querySelector('input[type="range"]');
        const checkbox = document.querySelector('input[type="checkbox"]');

        divElem.style.width = '600px';

        slider.addEventListener('input', () => {
            divElem.style.width = slider.value + 'px';
        });

        const resizeObserver = new ResizeObserver(entries => {
            for (let entry of entries) {
                if (entry.contentBoxSize) {
                    // Checking for chrome as using a non-standard array
                    if (entry.contentBoxSize[0])
                        h1Elem.style.fontSize = Math.max(1.5, entry.contentBoxSize[0].inlineSize / 200) + 'rem';
                    else
                        h1Elem.style.fontSize = Math.max(1.5, entry.contentBoxSize.inlineSize / 200) + 'rem';
                }
                else
                    h1Elem.style.fontSize = Math.max(1.5, entry.contentRect.width / 200) + 'rem';
            }
        });

        resizeObserver.observe(divElem);

        checkbox.addEventListener('change', () => {
            if (checkbox.checked) {
                resizeObserver.observe(divElem);
            }
            else {
                resizeObserver.unobserve(divElem);
            }
        });
    }
    else {
        console.log('Resize observer not supported!');
    }
</script>
</body>
</html>
